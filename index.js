"use strict";var QueryBuilder=function(){function a(a,b){void 0===a&&(a="and"),void 0===b&&(b=null),this.items=[],this.operator=a,this.parent=b}return a.prototype.addCondition=function(a,b,c,d){return void 0===c&&(c="value"),void 0===d&&(d="eq"),this.items.push({left:a,right:b,type:c,operator:d}),this},a.prototype.addGroup=function(b){void 0===b&&(b="and");var c=new a(b,this);return this.items.push(c),c},a.prototype.getParent=function(){return this.parent},a.prototype.getQuery=function(){var b,c,d,e;if(0===this.items.length)return null;if(1===this.items.length)d=this.items[0],c=d instanceof a?d.getQuery():d;else{for(e=[],b=0;b<this.items.length;b++)d=this.items[b],d instanceof a?d.isEmpty()||e.push(d.getQuery()):e.push(d);c=0===e.length?null:1===e.length?e[0]:{operator:this.operator,items:e}}return c},a.prototype.isEmpty=function(){var b,c;if(1===this.items.length)return c=this.items[0],c instanceof a?c.isEmpty():!1;for(b=0;b<this.items.length;b++){if(c=this.items[b],!(c instanceof a))return!1;if(!c.isEmpty())return!1}return!0},a.prototype.remove=function(b){var c,d,e=!1;if(b instanceof a)c=this.items.indexOf(b),e=c>-1,e&&this.items.splice(c,1);else for(b.hasOwnProperty("type")||(b.type="value"),b.hasOwnProperty("operator")||(b.operator="eq"),c=0;c<this.items.length;c++)if(d=this.items[c],!(d instanceof a)&&d.left===b.left&&d.right===b.right&&d.type===b.type&&d.operator===b.operator){e=!0,this.items.splice(c,1);break}return e},a}();exports.QueryBuilder=QueryBuilder;